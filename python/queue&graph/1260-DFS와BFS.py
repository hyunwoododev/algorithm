"""
1260ë²ˆ ë¬¸ì œ

ê·¸ë˜í”„ë¥¼ DFSë¡œ íƒìƒ‰í•œ ê²°ê³¼ì™€ BFSë¡œ íƒìƒ‰í•œ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤. 
ë‹¨, ë°©ë¬¸í•  ìˆ˜ ìˆëŠ” ì •ì ì´ ì—¬ëŸ¬ ê°œì¸ ê²½ìš°ì—ëŠ” ì •ì  ë²ˆí˜¸ê°€ ì‘ì€ ê²ƒì„ ë¨¼ì € ë°©ë¬¸í•˜ê³ , ë” ì´ìƒ ë°©ë¬¸í•  ìˆ˜ ìˆëŠ” ì ì´ ì—†ëŠ” ê²½ìš° ì¢…ë£Œí•œë‹¤. 
ì •ì  ë²ˆí˜¸ëŠ” 1ë²ˆë¶€í„° Në²ˆê¹Œì§€ì´ë‹¤.

ì²«ì§¸ ì¤„ì— ì •ì ì˜ ê°œìˆ˜ N(1 â‰¤ N â‰¤ 1,000), ê°„ì„ ì˜ ê°œìˆ˜ M(1 â‰¤ M â‰¤ 10,000), íƒìƒ‰ì„ ì‹œì‘í•  ì •ì ì˜ ë²ˆí˜¸ Vê°€ ì£¼ì–´ì§„ë‹¤. 
ë‹¤ìŒ Mê°œì˜ ì¤„ì—ëŠ” ê°„ì„ ì´ ì—°ê²°í•˜ëŠ” ë‘ ì •ì ì˜ ë²ˆí˜¸ê°€ ì£¼ì–´ì§„ë‹¤. 
ì–´ë–¤ ë‘ ì •ì  ì‚¬ì´ì— ì—¬ëŸ¬ ê°œì˜ ê°„ì„ ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§€ëŠ” ê°„ì„ ì€ ì–‘ë°©í–¥ì´ë‹¤.

ì²«ì§¸ ì¤„ì— DFSë¥¼ ìˆ˜í–‰í•œ ê²°ê³¼ë¥¼, ê·¸ ë‹¤ìŒ ì¤„ì—ëŠ” BFSë¥¼ ìˆ˜í–‰í•œ ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤. Vë¶€í„° ë°©ë¬¸ëœ ì ì„ ìˆœì„œëŒ€ë¡œ ì¶œë ¥í•˜ë©´ ëœë‹¤.

í˜„ìš° í•´ì„ :
-> ê°„ì„ ì´ ì£¼ì–´ì§„ ê²½ìš°ì— í•´ë‹¹.
-> ì´ë™ì„ í•˜ë©°, ì •ì ì„ í”„ë¦°íŠ¸í•˜ëŠ” ë¬¸ì œ.
-> ì‹œì‘ì ì´ ì •í•´ì§„ ê²½ìš°ì— í•´ë‹¹.
-> ì •ì ë²ˆí˜¸ì˜ ì‹œì‘ì´ 0ì´ ì•„ë‹Œ 1ë¶€í„° ì‹œì‘í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹.ğŸ˜£ğŸ˜£ğŸ˜£ğŸ˜£
"""
import sys
sys.setrecursionlimit(10**6)
from collections import deque

N, M, V = map(int, input().split())
graph = [[] for _ in range(N+1)] #ì •ì ì´ 0ë¶€í„°ê°€ ì•„ë‹ˆë¼ 1ë¶€í„° ì‹œì‘ë˜ë‹ˆê¹ N+1ë¡œ ì„¤ì •í•´ì¤˜ì•¼í•¨ # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„

# ê·¸ë˜í”„ë¥¼ ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ ë°©ì‹ìœ¼ë¡œ í‘œí˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
for _ in range(M):
    a, b = map(int, input().split())
    graph[a].append(b)
    graph[b].append(a)

for i in graph:
    i.sort()

# dfs
dfs_visited = [False] * (N + 1) # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„
def dfs(v):
    global dfs_visited
    global graph

    dfs_visited[v] = True # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„
    print(v, end=' ') # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„

    for i in graph[v]:
        if not dfs_visited[i]:
            dfs(i)
dfs(V)
print() # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„

# bfs
bfs_visited = [False] * (N + 1) # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„
def bfs(v):
    global bfs_visited
    global graph
    queue=deque()
    queue.append(v)
    bfs_visited[v]=True # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„
    while queue:
        v=queue.popleft()
        print(v,end=' ')

        for i in graph[v]:
            if not bfs_visited[i]:
                queue.append(i)
                bfs_visited[i]=True # ğŸ¤ªí‹€ë ¸ë˜ ë¶€ë¶„

bfs(V)